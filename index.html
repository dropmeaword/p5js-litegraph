<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="litegraph test">

    <title>p5js+litegraph prototype</title>

    <!-- let's include the base p5js libraries that allow us to make p5js sketches  -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.1.9/p5.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.1.9/addons/p5.sound.min.js"></script>

    <script type="text/javascript" src="js/dragable.js"></script>

    <script type="text/javascript" src="js/litegraph.js/build/litegraph.js"></script>
    <link rel="stylesheet" href="js/litegraph.js/css/litegraph.css">

    <script type="text/javascript" src="js/p5graph.js"></script>

    <style>
      
      html, body, * {
        margin: 0;
        padding: 0;
      }
      
      body {
        background: #000;
      }
      
      @font-face {
        font-family: 'iosevka-light';
        src: url('https://cdn.glitch.com/2918e4b0-3e7b-4c1f-b700-3b1096b26717%2Fiosevka-extendedthin.ttf?v=1603625470356')  format('truetype')
      }
      
      .display {
        font-family: 'iosevka-light', sans-serif;
        font-size: 0.75rem;
      }
      
      #node-panel {
        font-family: 'iosevka-light', sans-serif;
        position: absolute;
        width: 320px;
        top: 280px; left: 805px;
      }

      #display {
        position: absolute;
        top: 0px; left: 805px;
        z-index: 9;
        background-color: #000;
        border: 1px solid #aaa;
        text-align: center;
      }

      #displayhead {
        padding: 2px;
        cursor: move;
        z-index: 10;
        background-color: #242424;
        color: #fff;
      }
    </style>
  </head>
  <body style="width:100%; height:100%">
    
    <!-- begin: node editor section -->
    <section id="editor">
      <canvas id="node_editor" width="800" height="500" style="border: 1px solid"></canvas>
    </section>  
    <!-- end: node editor section -->

    <!-- begin: display preview -->
    <section class="display">
      <div id="display">
        <div id="displayhead">preview</div>
        <div id="preview" width="320" height="240"></canvas>
      </div>
    </section>  
    
    <script>
      dragable(document.getElementById("display"));
    </script>
    <!-- end: display preview -->

    
    <script>
    var graph = new LGraph();
    var canvas = new LGraphCanvas("#node_editor", graph);
    
    var cvs = LiteGraph.createNode("p5js/canvas")
    cvs.pos = [40,200];
    graph.add(cvs);

    var nconst = LiteGraph.createNode("basic/const");
    nconst.pos = [40,300];
    nconst.setValue(4.5);
    graph.add(nconst);
    
    var rect = LiteGraph.createNode("p5js/rectangle")
    rect.pos = [340,200]
    graph.add(rect)

    nconst.connect(0, rect, 2 )
    cvs.connect(0, rect, 0 )
    
    graph.start()
    </script>

<!--     <script>
      // preview p5js sketch
      function setup() {
        let cnvs = createCanvas(320, 240);
        cnvs.parent('preview')
      }

      function draw() {
        background(0)
        let y = cos(frameCount / 5) * 20
        ellipse(100, 100+y, 30, 30)
      }

      // var el = document.getElementById("preview")
      // var p5prev = new p5(skpreview, 'preview');
    </script>
     -->

    </body>
  </html>
